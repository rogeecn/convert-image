<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Optimization -->
    <title>Free Online Image Format Converter - Image Format Conversion, Watermark Addition, Batch Processing</title>
    <meta name="description"
        content="Free online image processing tool, supports JPEG, PNG, WEBP, BMP format conversion, batch text watermark, image watermark, image rotation and flipping. No software installation required, use directly in browser, supports offline operation.">
    <meta name="keywords"
        content="image format conversion,online image processing,batch image processing,add watermark,image compression,JPEG to PNG,WEBP conversion,free image tool">
    <meta name="author" content="Image Processing Tool">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://yoursite.com/en/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yoursite.com/en/">
    <meta property="og:title"
        content="Free Online Image Format Converter - Image Format Conversion, Watermark Addition">
    <meta property="og:description"
        content="Free online image processing tool, supports multiple format conversions and batch processing, no software installation required.">
    <meta property="og:image" content="https://yoursite.com/assets/icons/icon-512x512.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yoursite.com/en/">
    <meta property="twitter:title"
        content="Free Online Image Format Converter - Image Format Conversion, Watermark Addition">
    <meta property="twitter:description"
        content="Free online image processing tool, supports multiple format conversions and batch processing, no software installation required.">
    <meta property="twitter:image" content="https://yoursite.com/assets/icons/icon-512x512.png">

    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Image Processing Tool">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/icon-16x16.png">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Image Processing Tool",
        "description": "Free online image processing tool, supports JPEG, PNG, WEBP, BMP format conversion, batch text watermark, image watermark, image rotation and flipping. No software installation required, use directly in browser, supports offline operation.",
        "url": "https://yoursite.com/en/",
        "applicationCategory": "DesignApplication",
        "operatingSystem": "Any",
        "permissions": "browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Image format conversion",
            "Batch image processing",
            "Add text watermark",
            "Add image watermark",
            "Image rotation and flipping",
            "Offline use",
            "Free to use"
        ],
        "screenshot": "https://yoursite.com/assets/screenshots/desktop.png",
        "softwareVersion": "1.0.0",
        "author": {
            "@type": "Organization",
            "name": "Image Processing Tool Team"
        },
        "browserRequirements": "Modern browser with HTML5 Canvas support",
        "memoryRequirements": "512MB",
        "processorRequirements": "Any"
    }
    </script>
</head>

<body>
    <!-- Navigation Bar -->
    <header class="header">
        <div class="container">
            <h1 class="logo">Free Online Image Format Converter</h1>
            <div class="header-info">
                <div class="language-switcher">
                    <a href="index.html" class="lang-link">‰∏≠Êñá</a>
                    <span class="lang-separator">|</span>
                    <span class="lang-current">English</span>
                </div>
                <span id="imageCount">0 images</span>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="header-description">
            This tool integrates image format conversion, batch processing, online watermark addition and other
            practical functions. No need to download and install any software, use directly in the browser, making image
            processing simple and fast. Whether you are a designer, photographer or ordinary user, you can find tools to
            meet your needs here.
        </div>
    </div>

    <main class="main">
        <div class="container">
            <!-- Upload Area -->
            <section class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <h3>Drag images here or click to select</h3>
                        <p>Supports JPG, PNG, GIF, WEBP, BMP formats</p>
                        <button class="btn btn-primary" id="selectFilesBtn">Select Images</button>
                    </div>
                    <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
                </div>
            </section>

            <!-- Toolbar -->
            <section class="toolbar" id="toolbar" style="display: none;">
                <div class="toolbar-left">
                    <button class="btn btn-secondary" id="selectAllBtn">Select All</button>
                    <button class="btn btn-danger" id="deleteBtn">Delete</button>
                    <span class="separator">|</span>
                    <button class="btn btn-secondary" id="rotateLeftBtn">‚Ü∂ Rotate Left</button>
                    <button class="btn btn-secondary" id="rotateRightBtn">‚Ü∑ Rotate Right</button>
                    <button class="btn btn-secondary" id="flipHBtn">‚áÑ Flip Horizontal</button>
                    <button class="btn btn-secondary" id="flipVBtn">‚áÖ Flip Vertical</button>
                    <button class="btn btn-secondary" id="resetBtn">‚Ü∫ Reset</button>
                </div>
                <div class="toolbar-right">
                    <button class="btn btn-success" id="downloadBtn">üì• Save & Download</button>
                </div>
            </section>

            <!-- Main Content Area -->
            <section class="content-area">
                <!-- Image Grid -->
                <div class="images-container">
                    <div class="images-grid" id="imagesGrid">
                        <!-- Dynamically generated image items -->
                    </div>
                </div>

                <!-- Side Operation Panel -->
                <aside class="side-panel" id="sidePanel">
                    <div class="panel-header">
                        <h3>Control Panel</h3>
                        <span class="selected-count" id="selectedCount">No images selected</span>
                    </div>

                    <!-- Format Conversion -->
                    <div class="panel-section">
                        <h4>üîÑ Format Conversion</h4>
                        <div class="format-controls">
                            <label>Target Format:</label>
                            <select id="targetFormat">
                                <option value="jpeg">JPEG</option>
                                <option value="png">PNG</option>
                                <option value="webp">WEBP</option>
                                <option value="bmp">BMP</option>
                            </select>

                            <div class="quality-control" id="qualityControl">
                                <label>Quality: <span id="qualityValue">90</span>%</label>
                                <input type="range" id="qualitySlider" min="10" max="100" value="90">
                            </div>

                            <button class="btn btn-primary btn-full" id="convertBtn">Convert Format</button>
                        </div>
                    </div>

                    <!-- Watermark Settings -->
                    <div class="panel-section">
                        <h4>üè∑Ô∏è Watermark Settings</h4>
                        <div class="watermark-controls">
                            <div class="watermark-type">
                                <label>
                                    <input type="radio" name="watermarkType" value="text" checked> Text Watermark
                                </label>
                                <label>
                                    <input type="radio" name="watermarkType" value="image"> Image Watermark
                                </label>
                            </div>

                            <!-- Text Watermark Settings -->
                            <div class="text-watermark" id="textWatermark">
                                <input type="text" id="watermarkText" placeholder="Enter watermark text"
                                    value="Sample Watermark">

                                <div class="watermark-style">
                                    <label>Font Size:</label>
                                    <input type="range" id="fontSize" min="12" max="72" value="24">
                                    <span id="fontSizeValue">24px</span>
                                </div>

                                <div class="watermark-style">
                                    <label>Color:</label>
                                    <input type="color" id="fontColor" value="#ff8200">
                                </div>

                                <div class="watermark-style">
                                    <label>Opacity:</label>
                                    <input type="range" id="watermarkOpacity" min="0" max="100" value="80">
                                    <span id="opacityValue">80%</span>
                                </div>
                            </div>

                            <!-- Image Watermark Settings -->
                            <div class="image-watermark" id="imageWatermark" style="display: none;">
                                <input type="file" id="watermarkImageInput" accept="image/*">
                                <div class="watermark-style">
                                    <label>Opacity:</label>
                                    <input type="range" id="watermarkImageOpacity" min="0" max="100" value="80">
                                    <span id="imageOpacityValue">80%</span>
                                </div>
                            </div>

                            <!-- Position Selection -->
                            <div class="position-grid">
                                <label>Position:</label>
                                <div class="position-selector">
                                    <button class="position-btn" data-position="top-left">‚Üñ</button>
                                    <button class="position-btn" data-position="top-center">‚Üë</button>
                                    <button class="position-btn" data-position="top-right">‚Üó</button>
                                    <button class="position-btn" data-position="middle-left">‚Üê</button>
                                    <button class="position-btn active" data-position="center">‚óè</button>
                                    <button class="position-btn" data-position="middle-right">‚Üí</button>
                                    <button class="position-btn" data-position="bottom-left">‚Üô</button>
                                    <button class="position-btn" data-position="bottom-center">‚Üì</button>
                                    <button class="position-btn" data-position="bottom-right">‚Üò</button>
                                </div>
                            </div>

                            <button class="btn btn-primary btn-full" id="applyWatermarkBtn">Apply Watermark</button>
                        </div>
                    </div>
                </aside>
            </section>
        </div>
    </main>

    <!-- Image Format Knowledge Guide -->
    <section class="format-guide">
        <div class="container">
            <h2>üìö Image Format Knowledge Guide</h2>
            <p class="guide-intro">Understand the characteristics of different image formats and choose the format that
                best suits your needs</p>

            <div class="format-grid">
                <div class="format-card">
                    <div class="format-header">
                        <h3>JPEG</h3>
                        <span class="format-badge jpeg">Lossy Compression</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">Most commonly used image format, suitable for photos and complex
                            images</p>
                        <ul class="format-features">
                            <li>‚úÖ Small file size, high compression efficiency</li>
                            <li>‚úÖ Supports millions of colors</li>
                            <li>‚úÖ Excellent compatibility, supported by all devices</li>
                            <li>‚ùå No transparent background support</li>
                            <li>‚ùå Lossy compression, quality degrades with multiple edits</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>Use Cases:</strong> Photo sharing, web images, social media
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>PNG</h3>
                        <span class="format-badge png">Lossless Compression</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">High-quality image format with transparent background support</p>
                        <ul class="format-features">
                            <li>‚úÖ Lossless compression, maintains original quality</li>
                            <li>‚úÖ Supports transparent and semi-transparent effects</li>
                            <li>‚úÖ Ideal for icons, logos and simple graphics</li>
                            <li>‚ùå Larger file size</li>
                            <li>‚ùå Not suitable for complex photos</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>Use Cases:</strong> Website icons, logo design, images requiring transparency
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>WEBP</h3>
                        <span class="format-badge webp">Modern Format</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">Modern image format developed by Google, balancing quality and
                            size</p>
                        <ul class="format-features">
                            <li>‚úÖ 25-35% smaller than JPEG with same quality</li>
                            <li>‚úÖ Supports both lossy and lossless compression</li>
                            <li>‚úÖ Supports transparency and animation</li>
                            <li>‚ùå Not supported by some older browsers</li>
                            <li>‚ùå Limited editing software support</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>Use Cases:</strong> Modern websites, mobile apps, web optimization
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>BMP</h3>
                        <span class="format-badge bmp">Uncompressed</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">Windows native format, uncompressed bitmap file</p>
                        <ul class="format-features">
                            <li>‚úÖ Lossless quality, completely faithful</li>
                            <li>‚úÖ Simple structure, good compatibility</li>
                            <li>‚úÖ Supports multiple color depths</li>
                            <li>‚ùå Extremely large file size</li>
                            <li>‚ùå No transparent background support</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>Use Cases:</strong> Image processing intermediate format, system icons, special
                            purposes
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>GIF</h3>
                        <span class="format-badge gif">Animation Support</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">Image format with animation support, preferred for web memes</p>
                        <ul class="format-features">
                            <li>‚úÖ Supports animation effects</li>
                            <li>‚úÖ Supports transparent background</li>
                            <li>‚úÖ Excellent compatibility</li>
                            <li>‚ùå Only supports 256 colors</li>
                            <li>‚ùå Not suitable for photos and complex images</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>Use Cases:</strong> Animated memes, simple animations, web decorations
                        </div>
                    </div>
                </div>
            </div>

            <div class="format-comparison">
                <h3>üìä Format Comparison Table</h3>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Format</th>
                                <th>Compression Type</th>
                                <th>Transparency</th>
                                <th>Animation Support</th>
                                <th>File Size</th>
                                <th>Browser Support</th>
                                <th>Use Cases</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>JPEG</strong></td>
                                <td>Lossy</td>
                                <td>‚ùå</td>
                                <td>‚ùå</td>
                                <td>Small</td>
                                <td>100%</td>
                                <td>Photos, complex images</td>
                            </tr>
                            <tr>
                                <td><strong>PNG</strong></td>
                                <td>Lossless</td>
                                <td>‚úÖ</td>
                                <td>‚ùå</td>
                                <td>Large</td>
                                <td>100%</td>
                                <td>Icons, logos</td>
                            </tr>
                            <tr>
                                <td><strong>WEBP</strong></td>
                                <td>Lossy/Lossless</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>Very Small</td>
                                <td>95%+</td>
                                <td>Modern websites</td>
                            </tr>
                            <tr>
                                <td><strong>BMP</strong></td>
                                <td>Uncompressed</td>
                                <td>‚ùå</td>
                                <td>‚ùå</td>
                                <td>Extremely Large</td>
                                <td>100%</td>
                                <td>Professional use</td>
                            </tr>
                            <tr>
                                <td><strong>GIF</strong></td>
                                <td>Lossless</td>
                                <td>‚úÖ</td>
                                <td>‚úÖ</td>
                                <td>Medium</td>
                                <td>100%</td>
                                <td>Animations, memes</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="format-tips">
                <h3>üí° Selection Recommendations</h3>
                <div class="tips-grid">
                    <div class="tip-card">
                        <h4>üì± Social Media Sharing</h4>
                        <p>Recommended to use <strong>JPEG</strong> format, small file size, fast loading, meets most
                            platform requirements</p>
                    </div>
                    <div class="tip-card">
                        <h4>üé® Design Portfolio</h4>
                        <p>Recommended to use <strong>PNG</strong> format, maintains best quality, supports transparent
                            background</p>
                    </div>
                    <div class="tip-card">
                        <h4>üåê Website Optimization</h4>
                        <p>Recommended to use <strong>WEBP</strong> format, significantly reduces file size while
                            ensuring quality</p>
                    </div>
                    <div class="tip-card">
                        <h4>üòÑ Creating Memes</h4>
                        <p>Recommended to use <strong>GIF</strong> format, supports animation effects, good
                            compatibility</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Image Preview Modal -->
    <div class="modal" id="previewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="previewTitle">Image Preview</h3>
                <button class="modal-close" id="closePreview">&times;</button>
            </div>
            <div class="modal-body">
                <img id="previewImage" src="" alt="Preview Image">
                <div class="image-info" id="imageInfo">
                    <p><strong>Filename:</strong> <span id="infoName">-</span></p>
                    <p><strong>Dimensions:</strong> <span id="infoDimensions">-</span></p>
                    <p><strong>Size:</strong> <span id="infoSize">-</span></p>
                    <p><strong>Format:</strong> <span id="infoFormat">-</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-overlay" id="progressOverlay">
        <div class="progress-modal">
            <h3>Processing...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">Processing image 1/10</p>
        </div>
    </div>

    <!-- PWA Install Prompt -->
    <div class="install-prompt" id="installPrompt">
        <div class="install-content">
            <div class="install-icon">üì±</div>
            <div class="install-text">
                <h4>Install as App</h4>
                <p>Install the Image Processing Tool to your device for offline use experience</p>
            </div>
            <div class="install-actions">
                <button class="btn btn-primary" id="installBtn">Install</button>
                <button class="btn btn-secondary" id="dismissBtn">Not Now</button>
            </div>
        </div>
    </div>

    <!-- PWA Update Prompt -->
    <div class="update-prompt" id="updatePrompt">
        <div class="update-content">
            <div class="update-icon">üîÑ</div>
            <div class="update-text">
                <h4>New Version Available</h4>
                <p>New features are available, update now?</p>
            </div>
            <div class="update-actions">
                <button class="btn btn-primary" id="updateBtn">Update</button>
                <button class="btn btn-secondary" id="laterBtn">Later</button>
            </div>
        </div>
    </div>

    <!-- Load JSZip Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- PWA and Service Worker Initialization -->
    <script>
        // English Text Configuration - Unified management of all text used in JavaScript
        window.TEXT_CONFIG = {
            // Application initialization
            APP_INITIALIZED: 'Image processing tool initialized',

            // File processing related
            FILE_PROCESSING: 'Processing file...',
            FILE_PROCESS_FAILED: 'File processing failed',
            FILE_NAME_INVALID: 'Invalid filename',
            FILE_READ_FAILED: 'File read failed',

            // Image processing related
            IMAGE_LOAD_FAILED: 'Image load failed',
            IMAGE_SIZE_READ_FAILED: 'Unable to read image size information',
            IMAGE_COMPRESS_FAILED: 'Image compression failed',
            UNSUPPORTED_IMAGE_TYPE: 'Unsupported image source type',
            CANVAS_NOT_INITIALIZED: 'Canvas not initialized',
            FORMAT_CONVERT_FAILED: 'Format conversion failed',

            // Operation processing
            ROTATING_IMAGE: 'Rotating image...',
            ROTATE_FAILED: 'Rotation failed',
            FLIPPING_IMAGE: 'Flipping image...',
            FLIP_FAILED: 'Flip failed',
            RESETTING_IMAGE: 'Resetting image...',
            RESET_FAILED: 'Reset failed',

            // Format conversion
            CONVERTING_FORMAT: 'Converting format...',
            FORMAT_CONVERT_ERROR: 'Format conversion failed',
            SELECT_IMAGES_TO_CONVERT: 'Please select images to convert first',

            // Watermark related
            ADDING_WATERMARK: 'Adding watermark...',
            WATERMARK_FAILED: 'Add watermark failed',
            WATERMARK_IMAGE_LOADED: 'Watermark image loaded',
            WATERMARK_IMAGE_LOAD_FAILED: 'Watermark image load failed',
            WATERMARK_IMAGE_PROCESS_FAILED: 'Watermark image processing failed',
            SELECT_IMAGES_FOR_WATERMARK: 'Please select images to add watermark first',
            SET_WATERMARK_CONTENT: 'Please set watermark content',

            // Download related
            PREPARING_DOWNLOAD: 'Preparing download...',
            PACKING_FILES: 'Packing files...',
            DOWNLOAD_FAILED: 'Download failed',
            JSZIP_NOT_LOADED: 'JSZip library not loaded',
            ZIP_GENERATE_FAILED: 'ZIP file generation failed',

            // UI components
            MODAL_WINDOW: 'Modal window',
            DELETE_IMAGE: 'Delete image',
            SELECT_ALL: 'Select all',
            DESELECT_ALL: 'Deselect all',
            NO_IMAGES_SELECTED: 'No images selected',
            CONFIRM_DELETE_SINGLE: 'Are you sure you want to delete this image?',
            CONFIRM_DELETE_MULTIPLE: 'Are you sure you want to delete these {count} images?',
            DRAG_FILES_HERE: 'Drag files here',

            // Preview related
            IMAGE_PREVIEW: 'Image preview',

            // Network status
            OFFLINE_MODE: 'üì° Offline mode - Some features limited',
            NETWORK_RESTORED: 'Network connection restored',
            NETWORK_DISCONNECTED: 'Network connection lost',
            LAYOUT_UPDATED: 'Layout updated',

            // PWA related
            PWA_INSTALL_SUCCESS: 'PWA installation successful',
            APP_INSTALL_SUCCESS: 'App installed successfully! Now you can access it directly from the home screen.',
            USER_ACCEPTED_INSTALL: 'User accepted installation prompt',
            USER_REJECTED_INSTALL: 'User rejected installation prompt',

            // Error handling
            GLOBAL_ERROR: 'Global error',
            APP_ERROR_REFRESH: 'App error occurred, please refresh the page and try again',
            ALL_MANAGERS_INITIALIZED: 'All managers initialized',

            // Performance monitoring
            PAGE_LOAD_PERFORMANCE: 'Page load performance data',
            HIGH_MEMORY_USAGE: 'High memory usage',

            // File validation
            UNSUPPORTED_FILE_FORMAT: 'Unsupported file format: {type}. Supported formats: JPG, PNG, GIF, WEBP, BMP',
            FILE_TOO_LARGE: 'File too large: {size}MB. Maximum supported: {maxSize}MB',
            FILE_PROCESS_ERROR: 'File {name} processing failed',

            // Success messages
            SUCCESS_ADD_IMAGES: 'Successfully added {count} images',
            SUCCESS_DELETE_IMAGES: 'Deleted {count} images',
            SUCCESS_ROTATE_IMAGES: 'Rotated {count} images',
            SUCCESS_FLIP_IMAGES: 'Flipped {count} images',
            SUCCESS_RESET_IMAGES: 'Reset {count} images',
            SUCCESS_CONVERT_IMAGES: 'Converted {count} images to {format} format',
            SUCCESS_ADD_WATERMARK: 'Added watermark to {count} images',
            SUCCESS_DOWNLOAD_IMAGES: 'Downloaded {count} images',

            // Image count
            IMAGE_COUNT: '{count} images',
            SELECTED_COUNT: 'Selected {selected}/{total} images',

            // Progress bar text
            PROCESSING: 'Processing...',
            PROCESSING_GENERIC: 'Processing...',
            PROGRESS_PERCENT: 'Progress: {percent}%'
        };

        // HTML Template Definitions - Unified management of all HTML templates used in JavaScript
        window.HTML_TEMPLATES = {
            // Modal window template
            MODAL: `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>{title}</h3>
                        {closeButton}
                    </div>
                    <div class="modal-body">
                        {content}
                    </div>
                </div>
            `,

            // Modal close button
            MODAL_CLOSE_BUTTON: '<button class="modal-close">&times;</button>',

            // Image grid item template
            IMAGE_GRID_ITEM: `
                <div class="image-header">
                    <input type="checkbox" class="image-checkbox" {checked}>
                    <button class="image-delete" title="{deleteTitle}">√ó</button>
                </div>
                <img class="image-preview" src="{thumbnailUrl}" alt="{name}" loading="lazy">
                <div class="image-info">
                    <h4 title="{name}">{truncatedName}</h4>
                    <p>Size: {width} √ó {height}</p>
                    <p>File Size: {size}</p>
                    <p>Format: {format}</p>
                </div>
            `,

            // Toolbar template
            TOOLBAR: `
                <div class="toolbar-left">
                    <button class="btn btn-secondary" id="selectAllBtn">Select All</button>
                    <button class="btn btn-danger" id="deleteBtn" disabled>Delete</button>
                    <span class="separator">|</span>
                    <button class="btn btn-secondary" id="rotateLeftBtn" disabled>‚Ü∂ Rotate Left</button>
                    <button class="btn btn-secondary" id="rotateRightBtn" disabled>‚Ü∑ Rotate Right</button>
                    <button class="btn btn-secondary" id="flipHBtn" disabled>‚áÑ Flip Horizontal</button>
                    <button class="btn btn-secondary" id="flipVBtn" disabled>‚áÖ Flip Vertical</button>
                    <button class="btn btn-secondary" id="resetBtn" disabled>‚Ü∫ Reset</button>
                </div>
                <div class="toolbar-right">
                    <button class="btn btn-success" id="downloadBtn" disabled>üì• Download</button>
                </div>
            `,

            // Progress bar template
            PROGRESS_OVERLAY: `
                <div class="progress-modal">
                    <h3>{processingTitle}</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p id="progressText">{processingText}</p>
                </div>
            `,

            // Notification style template
            NOTIFICATION_STYLE: `
                position: fixed;
                top: 20px;
                right: 20px;
                background: {backgroundColor};
                color: white;
                padding: 12px 16px;
                border-radius: 4px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                z-index: 10000;
                font-size: 14px;
                max-width: 300px;
                word-wrap: break-word;
                animation: slideInRight 0.3s ease;
            `
        };

        // Service Worker registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registration successful:', registration);

                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    showUpdatePrompt();
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }

        // PWA installation prompt
        let deferredPrompt;
        let installPromptShown = localStorage.getItem('installPromptShown') === 'true';

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;

            if (!installPromptShown) {
                setTimeout(() => {
                    showInstallPrompt();
                }, 3000); // Show install prompt after 3 seconds
            }
        });

        // Show install prompt
        function showInstallPrompt() {
            const installPrompt = document.getElementById('installPrompt');
            if (installPrompt) {
                installPrompt.style.display = 'flex';
            }
        }

        // Show update prompt
        function showUpdatePrompt() {
            const updatePrompt = document.getElementById('updatePrompt');
            if (updatePrompt) {
                updatePrompt.style.display = 'flex';
            }
        }

        // Install button events
        document.addEventListener('DOMContentLoaded', () => {
            const installBtn = document.getElementById('installBtn');
            const dismissBtn = document.getElementById('dismissBtn');
            const installPrompt = document.getElementById('installPrompt');

            if (installBtn) {
                installBtn.addEventListener('click', () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                console.log('User accepted install');
                            }
                            deferredPrompt = null;
                        });
                    }
                    installPrompt.style.display = 'none';
                    localStorage.setItem('installPromptShown', 'true');
                });
            }

            if (dismissBtn) {
                dismissBtn.addEventListener('click', () => {
                    installPrompt.style.display = 'none';
                    localStorage.setItem('installPromptShown', 'true');
                });
            }

            // Update button events
            const updateBtn = document.getElementById('updateBtn');
            const laterBtn = document.getElementById('laterBtn');
            const updatePrompt = document.getElementById('updatePrompt');

            if (updateBtn) {
                updateBtn.addEventListener('click', () => {
                    if (navigator.serviceWorker.controller) {
                        navigator.serviceWorker.controller.postMessage({ type: 'SKIP_WAITING' });
                    }
                    window.location.reload();
                });
            }

            if (laterBtn) {
                laterBtn.addEventListener('click', () => {
                    updatePrompt.style.display = 'none';
                });
            }
        });

        // Listen for installation complete event
        window.addEventListener('appinstalled', (evt) => {
            console.log('PWA installation successful');
            // You can add installation success feedback here
        });
    </script>

    <!-- Load project scripts -->
    <script src="scripts/image-processor.js"></script>
    <script src="scripts/file-handler.js"></script>
    <script src="scripts/ui-components.js"></script>
    <script src="scripts/main.js"></script>
</body>

</html>