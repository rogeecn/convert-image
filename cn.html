<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO 优化 -->
    <title>免费在线图片格式转换工具 - 免费在线图片格式转换、水印添加、批量处理</title>
    <meta name="description"
        content="免费在线图片处理工具，支持JPEG、PNG、WEBP、BMP格式转换，批量添加文字水印、图片水印，图片旋转翻转等功能。无需安装软件，浏览器直接使用，支持离线操作。">
    <meta name="keywords" content="图片格式转换,在线图片处理,批量图片处理,添加水印,图片压缩,JPEG转PNG,WEBP转换,免费图片工具">
    <meta name="author" content="图片处理工具">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://convert-image-online.ipao.vip/cn.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://convert-image-online.ipao.vip/cn.html">
    <meta property="og:title" content="免费图片在线格式转换工具 - 免费图片格式转换、水印添加">
    <meta property="og:description" content="免费在线图片处理工具，支持多种格式转换和批量处理，无需安装软件。">
    <meta property="og:image" content="https://convert-image-online.ipao.vip/assets/icons/icon-512x512.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:locale" content="zh_CN">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://convert-image-online.ipao.vip/cn.html">
    <meta property="twitter:title" content="免费图片在线格式转换工具 - 免费图片格式转换、水印添加">
    <meta property="twitter:description" content="免费在线图片处理工具，支持多种格式转换和批量处理，无需安装软件。">
    <meta property="twitter:image" content="https://convert-image-online.ipao.vip/assets/icons/icon-512x512.png">

    <!-- PWA 支持 -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="图片处理工具">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/icon-16x16.png">

    <!-- 样式表 -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">

    <!-- 结构化数据 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "图片处理工具",
        "description": "免费在线图片处理工具，支持JPEG、PNG、WEBP、BMP格式转换，批量添加文字水印、图片水印，图片旋转翻转等功能。无需安装软件，浏览器直接使用，支持离线操作。",
        "url": "https://convert-image-online.ipao.vip/",
        "applicationCategory": "DesignApplication",
        "operatingSystem": "Any",
        "permissions": "browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "图片格式转换",
            "批量图片处理",
            "添加文字水印",
            "添加图片水印",
            "图片旋转翻转",
            "离线使用",
            "免费使用"
        ],
        "screenshot": "https://convert-image-online.ipao.vip/assets/screenshots/desktop.png",
        "softwareVersion": "1.0.0",
        "author": {
            "@type": "Organization",
            "name": "图片处理工具团队"
        },
        "browserRequirements": "Modern browser with HTML5 Canvas support",
        "memoryRequirements": "512MB",
        "processorRequirements": "Any"
    }
    </script>
</head>

<body>
    <!-- 导航栏 -->
    <header class="header">
        <div class="container">
            <h1 class="logo">免费在线图片格式转换工具</h1>
            <div class="header-info">
                <div class="language-switcher">
                    <span class="lang-current">中文</span>
                    <span class="lang-separator">|</span>
                    <a href="en.html" class="lang-link">English</a>
                    <span class="lang-separator">|</span>
                    <a href="de.html" class="lang-link">Deutsch</a>
                    <span class="lang-separator">|</span>
                    <a href="fr.html" class="lang-link">Français</a>
                    <span class="lang-separator">|</span>
                    <a href="ja.html" class="lang-link">日本語</a>
                    <span class="lang-separator">|</span>
                    <a href="ko.html" class="lang-link">한국어</a>
                    <span class="lang-separator">|</span>
                    <a href="ar.html" class="lang-link">العربية</a>
                </div>
                <span id="imageCount">0 张图片</span>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="header-description">
            本工具集合了图片格式转换、批量处理、在线添加水印等多种实用功能。无需下载安装任何软件，直接在浏览器中使用，让图片处理变得简单快捷。无论您是设计师、摄影师还是普通用户，都能在这里找到满足需求的工具。
        </div>
    </div>

    <main class="main">
        <div class="container">
            <!-- 上传区域 -->
            <section class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <h3>拖拽图片到此处或点击选择</h3>
                        <p>支持 JPG、PNG、GIF、WEBP、BMP 格式</p>
                        <button class="btn btn-primary" id="selectFilesBtn">选择图片</button>
                    </div>
                    <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
                </div>
            </section>

            <!-- 工具栏 -->
            <section class="toolbar" id="toolbar" style="display: none;">
                <div class="toolbar-left">
                    <button class="btn btn-secondary" id="selectAllBtn">全选</button>
                    <button class="btn btn-danger" id="deleteBtn">删除</button>
                    <span class="separator">|</span>
                    <button class="btn btn-secondary" id="rotateLeftBtn">↶ 左转</button>
                    <button class="btn btn-secondary" id="rotateRightBtn">↷ 右转</button>
                    <button class="btn btn-secondary" id="flipHBtn">⇄ 水平翻转</button>
                    <button class="btn btn-secondary" id="flipVBtn">⇅ 垂直翻转</button>
                    <button class="btn btn-secondary" id="resetBtn">↺ 重置</button>
                </div>
                <div class="toolbar-right">
                    <button class="btn btn-success" id="downloadBtn">📥 保存并下载</button>
                </div>
            </section>

            <!-- 主内容区域 -->
            <section class="content-area">
                <!-- 图片网格 -->
                <div class="images-container">
                    <div class="images-grid" id="imagesGrid">
                        <!-- 动态生成的图片项 -->
                    </div>
                </div>

                <!-- 侧边操作面板 -->
                <aside class="side-panel" id="sidePanel">
                    <div class="panel-header">
                        <h3>操作面板</h3>
                        <span class="selected-count" id="selectedCount">未选择图片</span>
                    </div>

                    <!-- 格式转换 -->
                    <div class="panel-section">
                        <h4>🔄 格式转换</h4>
                        <div class="format-controls">
                            <label>目标格式:</label>
                            <select id="targetFormat">
                                <option value="jpeg">JPEG</option>
                                <option value="png">PNG</option>
                                <option value="webp">WEBP</option>
                                <option value="bmp">BMP</option>
                            </select>

                            <div class="quality-control" id="qualityControl">
                                <label>质量: <span id="qualityValue">90</span>%</label>
                                <input type="range" id="qualitySlider" min="10" max="100" value="90">
                            </div>

                            <button class="btn btn-primary btn-full" id="convertBtn">转换格式</button>
                        </div>
                    </div>

                    <!-- 水印设置 -->
                    <div class="panel-section">
                        <h4>🏷️ 水印设置</h4>
                        <div class="watermark-controls">
                            <div class="watermark-type">
                                <label>
                                    <input type="radio" name="watermarkType" value="text" checked> 文字水印
                                </label>
                                <label>
                                    <input type="radio" name="watermarkType" value="image"> 图片水印
                                </label>
                            </div>

                            <!-- 文字水印设置 -->
                            <div class="text-watermark" id="textWatermark">
                                <input type="text" id="watermarkText" placeholder="输入水印文字" value="Sample Watermark">

                                <div class="watermark-style">
                                    <label>字体大小:</label>
                                    <input type="range" id="fontSize" min="12" max="72" value="24">
                                    <span id="fontSizeValue">24px</span>
                                </div>

                                <div class="watermark-style">
                                    <label>颜色:</label>
                                    <input type="color" id="fontColor" value="#ff8200">
                                </div>

                                <div class="watermark-style">
                                    <label>透明度:</label>
                                    <input type="range" id="watermarkOpacity" min="0" max="100" value="80">
                                    <span id="opacityValue">80%</span>
                                </div>
                            </div>

                            <!-- 图片水印设置 -->
                            <div class="image-watermark" id="imageWatermark" style="display: none;">
                                <input type="file" id="watermarkImageInput" accept="image/*">
                                <div class="watermark-style">
                                    <label>透明度:</label>
                                    <input type="range" id="watermarkImageOpacity" min="0" max="100" value="80">
                                    <span id="imageOpacityValue">80%</span>
                                </div>
                            </div>

                            <!-- 位置选择 -->
                            <div class="position-grid">
                                <label>位置:</label>
                                <div class="position-selector">
                                    <button class="position-btn" data-position="top-left">↖</button>
                                    <button class="position-btn" data-position="top-center">↑</button>
                                    <button class="position-btn" data-position="top-right">↗</button>
                                    <button class="position-btn" data-position="middle-left">←</button>
                                    <button class="position-btn active" data-position="center">●</button>
                                    <button class="position-btn" data-position="middle-right">→</button>
                                    <button class="position-btn" data-position="bottom-left">↙</button>
                                    <button class="position-btn" data-position="bottom-center">↓</button>
                                    <button class="position-btn" data-position="bottom-right">↘</button>
                                </div>
                            </div>



                            <button class="btn btn-primary btn-full" id="applyWatermarkBtn">应用水印</button>
                        </div>
                    </div>
                </aside>
            </section>
        </div>
    </main>

    <!-- 图片格式科普说明 -->
    <section class="format-guide">
        <div class="container">
            <h2>📚 图片格式知识科普</h2>
            <p class="guide-intro">了解不同图片格式的特点，选择最适合您需求的格式</p>

            <div class="format-grid">
                <div class="format-card">
                    <div class="format-header">
                        <h3>JPEG</h3>
                        <span class="format-badge jpeg">有损压缩</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">最常用的图片格式，适合照片和复杂图像</p>
                        <ul class="format-features">
                            <li>✅ 文件体积小，压缩效率高</li>
                            <li>✅ 支持数百万种颜色</li>
                            <li>✅ 兼容性极佳，所有设备都支持</li>
                            <li>❌ 不支持透明背景</li>
                            <li>❌ 有损压缩，多次编辑会降低质量</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>适用场景：</strong>照片分享、网页图片、社交媒体
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>PNG</h3>
                        <span class="format-badge png">无损压缩</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">高质量图片格式，支持透明背景</p>
                        <ul class="format-features">
                            <li>✅ 无损压缩，保持原始质量</li>
                            <li>✅ 支持透明背景和半透明效果</li>
                            <li>✅ 适合图标、徽标等简单图形</li>
                            <li>❌ 文件体积较大</li>
                            <li>❌ 不适合复杂照片</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>适用场景：</strong>网站图标、徽标设计、需要透明背景的图片
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>WEBP</h3>
                        <span class="format-badge webp">现代格式</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">Google开发的现代图片格式，平衡质量和体积</p>
                        <ul class="format-features">
                            <li>✅ 比JPEG小25-35%，质量相同</li>
                            <li>✅ 同时支持有损和无损压缩</li>
                            <li>✅ 支持透明背景和动画</li>
                            <li>❌ 部分老旧浏览器不支持</li>
                            <li>❌ 编辑软件支持有限</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>适用场景：</strong>现代网站、移动应用、网页优化
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>BMP</h3>
                        <span class="format-badge bmp">未压缩</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">Windows原生格式，未压缩的位图文件</p>
                        <ul class="format-features">
                            <li>✅ 无损画质，完全保真</li>
                            <li>✅ 简单结构，兼容性好</li>
                            <li>✅ 支持多种色深</li>
                            <li>❌ 文件体积极大</li>
                            <li>❌ 不支持透明背景</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>适用场景：</strong>图像处理中间格式、系统图标、特殊用途
                        </div>
                    </div>
                </div>

                <div class="format-card">
                    <div class="format-header">
                        <h3>GIF</h3>
                        <span class="format-badge gif">动画支持</span>
                    </div>
                    <div class="format-content">
                        <p class="format-description">支持动画的图片格式，网络表情包首选</p>
                        <ul class="format-features">
                            <li>✅ 支持动画效果</li>
                            <li>✅ 支持透明背景</li>
                            <li>✅ 兼容性极佳</li>
                            <li>❌ 只支持256种颜色</li>
                            <li>❌ 不适合照片和复杂图像</li>
                        </ul>
                        <div class="format-use-case">
                            <strong>适用场景：</strong>动画表情包、简单动画、网页装饰
                        </div>
                    </div>
                </div>
            </div>

            <div class="format-comparison">
                <h3>📊 格式对比表</h3>
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>格式</th>
                                <th>压缩类型</th>
                                <th>透明背景</th>
                                <th>动画支持</th>
                                <th>文件大小</th>
                                <th>浏览器支持</th>
                                <th>适用场景</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>JPEG</strong></td>
                                <td>有损</td>
                                <td>❌</td>
                                <td>❌</td>
                                <td>小</td>
                                <td>100%</td>
                                <td>照片、复杂图像</td>
                            </tr>
                            <tr>
                                <td><strong>PNG</strong></td>
                                <td>无损</td>
                                <td>✅</td>
                                <td>❌</td>
                                <td>大</td>
                                <td>100%</td>
                                <td>图标、徽标</td>
                            </tr>
                            <tr>
                                <td><strong>WEBP</strong></td>
                                <td>有损/无损</td>
                                <td>✅</td>
                                <td>✅</td>
                                <td>很小</td>
                                <td>95%+</td>
                                <td>现代网站</td>
                            </tr>
                            <tr>
                                <td><strong>BMP</strong></td>
                                <td>无压缩</td>
                                <td>❌</td>
                                <td>❌</td>
                                <td>极大</td>
                                <td>100%</td>
                                <td>专业用途</td>
                            </tr>
                            <tr>
                                <td><strong>GIF</strong></td>
                                <td>无损</td>
                                <td>✅</td>
                                <td>✅</td>
                                <td>中等</td>
                                <td>100%</td>
                                <td>动画、表情包</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="format-tips">
                <h3>💡 选择建议</h3>
                <div class="tips-grid">
                    <div class="tip-card">
                        <h4>📱 社交媒体分享</h4>
                        <p>推荐使用 <strong>JPEG</strong> 格式，文件小、加载快，满足大多数平台要求</p>
                    </div>
                    <div class="tip-card">
                        <h4>🎨 设计作品展示</h4>
                        <p>推荐使用 <strong>PNG</strong> 格式，保持最佳画质，支持透明背景</p>
                    </div>
                    <div class="tip-card">
                        <h4>🌐 网站优化</h4>
                        <p>推荐使用 <strong>WEBP</strong> 格式，在保证质量的同时显著减小文件体积</p>
                    </div>
                    <div class="tip-card">
                        <h4>😄 制作表情包</h4>
                        <p>推荐使用 <strong>GIF</strong> 格式，支持动画效果，兼容性好</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 图片预览模态窗口 -->
    <div class="modal" id="previewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="previewTitle">图片预览</h3>
                <button class="modal-close" id="closePreview">&times;</button>
            </div>
            <div class="modal-body">
                <img id="previewImage" src="" alt="预览图片">
                <div class="image-info" id="imageInfo">
                    <p><strong>文件名:</strong> <span id="infoName">-</span></p>
                    <p><strong>尺寸:</strong> <span id="infoDimensions">-</span></p>
                    <p><strong>大小:</strong> <span id="infoSize">-</span></p>
                    <p><strong>格式:</strong> <span id="infoFormat">-</span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 进度条 -->
    <div class="progress-overlay" id="progressOverlay">
        <div class="progress-modal">
            <h3>处理中...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">正在处理图片 1/10</p>
        </div>
    </div>

    <!-- PWA 安装提示 -->
    <div class="install-prompt" id="installPrompt">
        <div class="install-content">
            <div class="install-icon">📱</div>
            <div class="install-text">
                <h4>安装为APP</h4>
                <p>将图片处理工具安装到设备，享受离线使用体验</p>
            </div>
            <div class="install-actions">
                <button class="btn btn-primary" id="installBtn">安装</button>
                <button class="btn btn-secondary" id="dismissBtn">暂不</button>
            </div>
        </div>
    </div>

    <!-- PWA 更新提示 -->
    <div class="update-prompt" id="updatePrompt">
        <div class="update-content">
            <div class="update-icon">🔄</div>
            <div class="update-text">
                <h4>发现新版本</h4>
                <p>有新功能可用，是否立即更新？</p>
            </div>
            <div class="update-actions">
                <button class="btn btn-primary" id="updateBtn">更新</button>
                <button class="btn btn-secondary" id="laterBtn">稍后</button>
            </div>
        </div>
    </div>

    <!-- 加载 JSZip 库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- PWA 和 Service Worker 初始化 -->
    <script>
        // 中文字符串配置 - 统一管理所有 JavaScript 中使用的中文文本
        window.TEXT_CONFIG = {
            // 应用初始化
            APP_INITIALIZED: '图片处理工具已初始化',

            // 文件处理相关
            FILE_PROCESSING: '正在处理文件...',
            FILE_PROCESS_FAILED: '文件处理失败',
            FILE_NAME_INVALID: '文件名无效',
            FILE_READ_FAILED: '文件读取失败',

            // 图片处理相关
            IMAGE_LOAD_FAILED: '图片加载失败',
            IMAGE_SIZE_READ_FAILED: '无法读取图片尺寸信息',
            IMAGE_COMPRESS_FAILED: '图片压缩失败',
            UNSUPPORTED_IMAGE_TYPE: '不支持的图片源类型',
            CANVAS_NOT_INITIALIZED: 'Canvas 未初始化',
            FORMAT_CONVERT_FAILED: '格式转换失败',

            // 操作处理
            ROTATING_IMAGE: '正在旋转图片...',
            ROTATE_FAILED: '旋转失败',
            FLIPPING_IMAGE: '正在翻转图片...',
            FLIP_FAILED: '翻转失败',
            RESETTING_IMAGE: '正在重置图片...',
            RESET_FAILED: '重置失败',

            // 格式转换
            CONVERTING_FORMAT: '正在转换格式...',
            FORMAT_CONVERT_ERROR: '格式转换失败',
            SELECT_IMAGES_TO_CONVERT: '请先选择要转换的图片',

            // 水印相关
            ADDING_WATERMARK: '正在添加水印...',
            WATERMARK_FAILED: '添加水印失败',
            WATERMARK_IMAGE_LOADED: '水印图片已加载',
            WATERMARK_IMAGE_LOAD_FAILED: '水印图片加载失败',
            WATERMARK_IMAGE_PROCESS_FAILED: '水印图片处理失败',
            SELECT_IMAGES_FOR_WATERMARK: '请先选择要添加水印的图片',
            SET_WATERMARK_CONTENT: '请设置水印内容',

            // 下载相关
            PREPARING_DOWNLOAD: '正在准备下载...',
            PACKING_FILES: '正在打包文件...',
            DOWNLOAD_FAILED: '下载失败',
            JSZIP_NOT_LOADED: 'JSZip 库未加载',
            ZIP_GENERATE_FAILED: 'ZIP文件生成失败',

            // UI 组件
            MODAL_WINDOW: '模态窗口',
            DELETE_IMAGE: '删除图片',
            SELECT_ALL: '全选',
            DESELECT_ALL: '取消全选',
            NO_IMAGES_SELECTED: '未选择图片',
            CONFIRM_DELETE_SINGLE: '确定要删除这张图片吗？',
            CONFIRM_DELETE_MULTIPLE: '确定要删除这 {count} 张图片吗？',
            DRAG_FILES_HERE: '拖拽文件到此处',

            // 预览相关
            IMAGE_PREVIEW: '图片预览',

            // 网络状态
            OFFLINE_MODE: '📡 离线模式 - 部分功能受限',
            NETWORK_RESTORED: '网络连接已恢复',
            NETWORK_DISCONNECTED: '网络连接已断开',
            LAYOUT_UPDATED: '布局已更新',

            // PWA 相关
            PWA_INSTALL_SUCCESS: 'PWA 安装成功',
            APP_INSTALL_SUCCESS: '应用安装成功！现在可以从主屏幕直接访问。',
            USER_ACCEPTED_INSTALL: '用户接受了安装提示',
            USER_REJECTED_INSTALL: '用户拒绝了安装提示',

            // 错误处理
            GLOBAL_ERROR: '全局错误',
            APP_ERROR_REFRESH: '应用发生错误，请刷新页面重试',
            ALL_MANAGERS_INITIALIZED: '所有管理器已初始化',

            // 性能监控
            PAGE_LOAD_PERFORMANCE: '页面加载性能数据',
            HIGH_MEMORY_USAGE: '内存使用率过高',

            // 文件验证
            UNSUPPORTED_FILE_FORMAT: '不支持的文件格式: {type}。支持的格式: JPG, PNG, GIF, WEBP, BMP',
            FILE_TOO_LARGE: '文件过大: {size}MB。最大支持: {maxSize}MB',
            FILE_PROCESS_ERROR: '文件 {name} 处理失败',

            // 成功消息
            SUCCESS_ADD_IMAGES: '成功添加 {count} 张图片',
            SUCCESS_DELETE_IMAGES: '已删除 {count} 张图片',
            SUCCESS_ROTATE_IMAGES: '已旋转 {count} 张图片',
            SUCCESS_FLIP_IMAGES: '已翻转 {count} 张图片',
            SUCCESS_RESET_IMAGES: '已重置 {count} 张图片',
            SUCCESS_CONVERT_IMAGES: '已转换 {count} 张图片为 {format} 格式',
            SUCCESS_ADD_WATERMARK: '已为 {count} 张图片添加水印',
            SUCCESS_DOWNLOAD_IMAGES: '已下载 {count} 张图片',

            // 图片计数
            IMAGE_COUNT: '{count} 张图片',
            SELECTED_COUNT: '已选择 {selected}/{total} 张图片',

            // 进度条文本
            PROCESSING: '处理中...',
            PROCESSING_GENERIC: '正在处理...',
            PROGRESS_PERCENT: '进度: {percent}%'
        };

        // HTML 模板定义 - 统一管理所有 JavaScript 中使用的 HTML 模板
        window.HTML_TEMPLATES = {
            // 模态窗口模板
            MODAL: `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>{title}</h3>
                        {closeButton}
                    </div>
                    <div class="modal-body">
                        {content}
                    </div>
                </div>
            `,

            // 模态窗口关闭按钮
            MODAL_CLOSE_BUTTON: '<button class="modal-close">&times;</button>',

            // 图片网格项模板
            IMAGE_GRID_ITEM: `
                <div class="image-header">
                    <input type="checkbox" class="image-checkbox" {checked}>
                    <button class="image-delete" title="{deleteTitle}">×</button>
                </div>
                <img class="image-preview" src="{thumbnailUrl}" alt="{name}" loading="lazy">
                <div class="image-info">
                    <h4 title="{name}">{truncatedName}</h4>
                    <p>尺寸: {width} × {height}</p>
                    <p>大小: {size}</p>
                    <p>格式: {format}</p>
                </div>
            `,

            // 工具栏模板
            TOOLBAR: `
                <div class="toolbar-left">
                    <button class="btn btn-secondary" id="selectAllBtn">全选</button>
                    <button class="btn btn-danger" id="deleteBtn" disabled>删除</button>
                    <span class="separator">|</span>
                    <button class="btn btn-secondary" id="rotateLeftBtn" disabled>↶ 左转</button>
                    <button class="btn btn-secondary" id="rotateRightBtn" disabled>↷ 右转</button>
                    <button class="btn btn-secondary" id="flipHBtn" disabled>⇄ 水平翻转</button>
                    <button class="btn btn-secondary" id="flipVBtn" disabled>⇅ 垂直翻转</button>
                    <button class="btn btn-secondary" id="resetBtn" disabled>↺ 重置</button>
                </div>
                <div class="toolbar-right">
                    <button class="btn btn-success" id="downloadBtn" disabled>📥 下载</button>
                </div>
            `,

            // 进度条模板
            PROGRESS_OVERLAY: `
                <div class="progress-modal">
                    <h3>{processingTitle}</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p id="progressText">{processingText}</p>
                </div>
            `,

            // 通知样式模板
            NOTIFICATION_STYLE: `
                position: fixed;
                top: 20px;
                right: 20px;
                background: {backgroundColor};
                color: white;
                padding: 12px 16px;
                border-radius: 4px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                z-index: 10000;
                font-size: 14px;
                max-width: 300px;
                word-wrap: break-word;
                animation: slideInRight 0.3s ease;
            `
        };

        // Service Worker 注册
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW 注册成功:', registration);

                        // 检查更新
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    showUpdatePrompt();
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.log('SW 注册失败:', error);
                    });
            });
        }
    </script>

    <!-- 加载项目脚本 -->
    <script src="scripts/image-processor.js"></script>
    <script src="scripts/file-handler.js"></script>
    <script src="scripts/ui-components.js"></script>
    <script src="scripts/main.js"></script>
</body>

</html>